{
  "voice_mode": "unified",
  "server_route": "respond",
  "audio": {
    "playback_rate": 22050,
    "output_device": null,
    "input_device": 17,
    "input_device_name": "Microphone (3- iTalk-02)",
    "input_backend": "wasapi",
    "input_sample_rate": 44100,
    "input_channels": 1
  },
  "vad": {
    "start_rms": 300,
    "stop_rms": 150,
    "hold_sec": 1.2,
    "dyn_thresh_scale": 1.0
  },
  "local_fallback": {
    "tts_engine": "piper",
    "edge_voice": "en-US-MichelleNeural",
    "whisper_model": "small",
    "auto_switch": true,
    "force_local": false,
    "piper": {
      "exe": "C:/Users/USER 1/ava-integration/vendor/piper/piper.exe",
      "model": "C:/Users/USER 1/ava-integration/voices/piper/en_US-lessac-medium.onnx"
    }
  },
  "asr": {
    "early_commit": {
      "enabled": true,
      "stable_time_sec": 0.5,
      "max_words": 3,
      "comment": "Conservative early commit to reduce false activations from Vosk partials"
    }
  },
  "intent_routing": {
    "enabled": true,
    "local_patterns": [
      "pause automation",
      "resume automation", 
      "stop automation",
      "create file",
      "remember that",
      "send email",
      "turn on",
      "turn off",
      "system info",
      "camera"
    ]
  },
  "safety": {
    "confirm_destructive": true,
    "destructive_keywords": ["delete", "remove", "format", "restart", "shutdown", "send", "kill", "terminate"]
  },
  "echo_cancellation": {
    "enabled": true,
    "suppress_tts_during_mic": true,
    "grace_period_sec": 3.0,
    "tts_cooldown_sec": 2.5,
    "rms_boost_during_tts": 2.0
  },
  "voice_stabilization": {
    "final_only_gating": true,
    "half_duplex": true,
    "turn_state_logging": true,
    "comment": "Partials display only, finals trigger DECIDE. Mic muted during SPEAK state."
  },
  "barge_in": {
    "enabled": true,
    "min_speech_ms": 500,
    "require_final_to_interrupt": true,
    "cancel_tts_on_interrupt": true,
    "cooldown_after_interrupt_ms": 1000,
    "comment": "D005: Barge-in disabled by default. When enabled, user can interrupt TTS with speech. Requires final transcript to trigger interrupt (not partials)."
  },
  "safe_mode": {
    "enabled": false,
    "disable_barge_in": true,
    "disable_realtime_asr": false,
    "fallback_tts_engine": "piper",
    "comment": "Safe mode disables fragile features after repeated crashes. Auto-enabled by crash supervisor."
  },
  "crash_supervision": {
    "enabled": true,
    "max_restarts": 5,
    "restart_window_sec": 300,
    "initial_backoff_sec": 3,
    "max_backoff_sec": 60,
    "safe_mode_after_crashes": 3,
    "crash_report_dir": "logs/crash_reports",
    "state_file": "logs/runner_state.json",
    "comment": "Supervisor settings for crash containment and recovery."
  }
}
