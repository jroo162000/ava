{
  "_purpose": "Feature implementation checklist. Tracks what passes and what doesn't.",
  "_rules": [
    "passes: false -> true ONLY when feature is verified working.",
    "Never set passes back to false unless feature is removed.",
    "No freestyle edits - only update passes field.",
    "Add test_proof when marking true."
  ],

  "phase_1_audio_foundation": {
    "mic_capture": {
      "passes": true,
      "test_proof": "RMS values logged in [micdbg] output"
    },
    "vad_detection": {
      "passes": true,
      "test_proof": "Speech triggers ASR, silence ends it"
    },
    "vosk_streaming_asr": {
      "passes": true,
      "test_proof": "Partial transcripts appear in real-time"
    },
    "whisper_final_asr": {
      "passes": true,
      "test_proof": "Final transcripts are accurate"
    },
    "piper_tts": {
      "passes": true,
      "test_proof": "AVA speaks responses audibly"
    },
    "audio_playback": {
      "passes": true,
      "test_proof": "22050 Hz playback without distortion"
    }
  },

  "phase_2_stability": {
    "half_duplex_audio": {
      "passes": true,
      "test_proof": "Mic suppressed during TTS, no self-trigger"
    },
    "echo_cancellation": {
      "passes": true,
      "test_proof": "Grace period prevents echo loops"
    },
    "tts_serialization": {
      "passes": true,
      "test_proof": "New speech cancels previous, no overlap"
    },
    "queue_management": {
      "passes": true,
      "test_proof": "Queue drains on tts.start/tts.end"
    },
    "crash_recovery_watchdog": {
      "passes": true,
      "test_proof": "Watchdog restarts after segfault"
    },
    "canonical_runner_enforcement": {
      "passes": true,
      "test_proof": "Non-canonical runners archived; smoke_test.py single runner PASS; start_ava.ps1 starts only canonical runner"
    },
    "final_only_transcript_gating": {
      "passes": true,
      "test_proof": "TurnStateMachine enforces LISTEN->FINAL->DECIDE; [PARTIAL->NO_TOOL] logged; [FINAL->DECIDE] logged; smoke_test.py PASS"
    },
    "regression_test_suite": {
      "passes": true,
      "test_proof": "20/20 pytest tests pass; tests fail when invariants violated; all voice invariants locked in"
    }
  },

  "phase_3_tool_execution": {
    "node_gateway_boundary": {
      "passes": true,
      "test_proof": "Python sends text+metadata only; Node /tools/:name/execute is single gateway; no direct cmpuse Agent execution in production code"
    },
    "idempotency_cache": {
      "passes": true,
      "test_proof": "26 unit tests pass; smoke_test.py PASS; same tool+args within 60s TTL blocked"
    },
    "tool_routing": {
      "passes": true,
      "test_proof": "Intent patterns route to correct handlers"
    },
    "safety_confirmations": {
      "passes": true,
      "test_proof": "Destructive keywords prompt confirmation"
    }
  },

  "phase_4_advanced": {
    "barge_in": {
      "passes": true,
      "test_proof": "D005 satisfied: turn-state authority, tool safety under interruption, echo containment; 11/11 smoke tests + 29/29 regression tests pass with barge-in enabled"
    },
    "native_segfault_prevention": {
      "passes": true,
      "test_proof": "Preflight checks validate audio/deps; crash supervisor with backoff+safe mode; crash reports capture state/logs; 14/14 smoke tests pass"
    }
  }
}
